<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DK WIN - AI MOD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;600;800&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100%; overflow: hidden; background: #000; font-family: 'Poppins', sans-serif; }

        #loginPage { display: flex; justify-content: center; align-items: center; height: 100vh; background: radial-gradient(circle at center, #001a33, #000); }
        .ai-card { background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(20px); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 40px; padding: 40px 30px; width: 90%; max-width: 380px; text-align: center; }
        .ai-core { width: 80px; height: 80px; border: 2px solid #00d4ff; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px #00d4ff; color: #00d4ff; font-family: 'Orbitron'; font-weight: 900; font-size: 12px; }
        .ai-input { background: #0a0a0a; border: 1px solid #1a1a1a; border-radius: 12px; padding: 12px; color: #fff; width: 100%; margin-bottom: 15px; text-align: center; font-family: 'Orbitron'; }
        .btn-ai { background: linear-gradient(90deg, #00d4ff, #004ecc); color: white; font-weight: bold; padding: 12px; border-radius: 12px; width: 100%; }

        #signalPanel {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            width: 96%; max-width: 380px; height: 85px;
            background: linear-gradient(180deg, #1e2532 0%, #000000 100%);
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px;
            display: none; align-items: center; justify-content: space-between;
            padding: 0 15px; z-index: 10000; color: #fff;
            box-shadow: 0 5px 25px rgba(0,0,0,0.8); touch-action: none;
        }

        .left-part { flex: 1; }
        .mini-label { font-size: 8px; color: #6a7c92; font-weight: 900; letter-spacing: 1px; }
        .period-val { font-family: 'Orbitron'; font-size: 14px; color: #fff; letter-spacing: 1px; }

        .center-part { flex: 2; display: flex; flex-direction: column; align-items: center; }
        .signal-row { display: flex; align-items: center; gap: 8px; margin-bottom: 5px; }
        #sigBadge { background: #00d4ff; color: #000; font-weight: 900; padding: 2px 15px; border-radius: 10px; font-size: 14px; text-transform: uppercase; }
        .red-dot { width: 12px; height: 12px; background: #ff0000; border-radius: 50%; box-shadow: 0 0 10px #ff0000; animation: pulse 1s infinite; }
        
        .prediction-balls { display: flex; gap: 5px; }
        .p-ball { width: 22px; height: 22px; background: linear-gradient(180deg, #6b8cff, #3b4cff); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }

        .right-part { flex: 1; text-align: right; }
        .timer-val { font-family: 'Orbitron'; font-size: 24px; font-weight: 900; color: #fff; }
        .btn-row { display: flex; gap: 5px; justify-content: flex-end; margin-top: 5px; }
        .small-btn { font-size: 8px; font-weight: 900; color: #6a7c92; text-transform: uppercase; border: 1px solid #333; padding: 2px 6px; border-radius: 5px; cursor: pointer; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        #gamePage { display: none; height: 100vh; width: 100%; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

<div id="loginPage">
    <div class="ai-card">
        <div class="ai-core">TEAM<br>AV</div>
        <h2 class="text-white text-lg font-bold mb-4"> DK WIN AI MOD</h2>
        <input type="password" id="accessKey" class="ai-input" placeholder="ENTER PASSWORD">
        <button onclick="unlockMod()" class="btn-ai">ACTIVATE AI</button>
        <a href="https://t.me/+Z-1lO8scibBkMzg9" target="_blank" class="mt-4 block text-blue-400 text-xs"><i class="fab fa-telegram"></i>TELEGRAM</a>
    </div>
</div>

<div id="gamePage">
    <div id="signalPanel">
        <div class="left-part">
            <div class="mini-label">MINI MODE</div>
            <div id="periodText" class="period-val">P ----</div>
        </div>

        <div class="center-part">
            <div class="signal-row">
                <div id="sigBadge">WAIT...</div>
                <div class="red-dot"></div>
            </div>
            <div class="prediction-balls" id="ballRow">
                <div class="p-ball">?</div>
                <div class="p-ball">?</div>
                <div class="p-ball">?</div>
            </div>
        </div>

        <div class="right-part">
            <div id="timerText" class="timer-val">00</div>
            <div class="btn-row">
                <div class="small-btn" onclick="location.reload()">FULL</div>
                <div class="small-btn">STEP</div>
                <div class="small-btn" style="color:#ff4444" onclick="document.getElementById('signalPanel').style.display='none'">HIDE</div>
            </div>
        </div>
    </div>
    <iframe id="frame" src="about:blank"></iframe>
</div>

<script>
    let lastPeriod = "";

    // আপনার নতুন API কনফিগ
    const API_CONFIG = {
        URL: 'https://api.bdg88zf.com/api/webapi/GetGameIssue',
        PAYLOAD: { 
            typeId: 1, 
            language: 0, 
            random: "e7fe6c090da2495ab8290dac551ef1ed", 
            signature: "1F390E2B2D8A55D693E57FD905AE73A7", 
            timestamp: Math.floor(Date.now()/1000) 
        }
    };

    function unlockMod() {
        if(document.getElementById("accessKey").value.toUpperCase() === "AV123") {
            document.getElementById("loginPage").style.display = "none";
            document.getElementById("gamePage").style.display = "block";
            document.getElementById("signalPanel").style.display = "flex";
            document.getElementById("frame").src = "https://dkwin.org/#/register?invitationCode=57752122669";
            startMasterSync(); // সিগন্যাল ইঞ্জিন স্টার্ট
            setInterval(updateClock, 1000);
        } else { alert("ACCESS DENIED!"); }
    }

    async function startMasterSync() {
        try {
            const response = await fetch(API_CONFIG.URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(API_CONFIG.PAYLOAD)
            });
            const json = await response.json();
            
            if (json && json.data) {
                let currentIssue = json.data.issueNumber;
                
                if (currentIssue !== lastPeriod) {
                    lastPeriod = currentIssue;
                    
                    // পিরিয়ড ডিসপ্লে আপডেট
                    document.getElementById("periodText").innerText = "PERIOD: " + currentIssue.slice(-5);
                    
                    // সিগন্যাল ক্যালকুলেশন লজিক
                    let digitsSum = currentIssue.split('').reduce((a, b) => a + (parseInt(b) || 0), 0);
                    let prediction = (digitsSum % 2 === 0) ? "BIG" : "SMALL";
                    
                    updateSignalUI(prediction);
                }
            }
        } catch (error) {
            console.error("Syncing Error...");
        }
        setTimeout(startMasterSync, 2000); // ২ সেকেন্ড পরপর অটো চেক
    }

    function updateSignalUI(prediction) {
        const badge = document.getElementById("sigBadge");
        const ballRow = document.getElementById("ballRow");
        
        badge.innerText = prediction;
        badge.style.background = (prediction === "BIG") ? "#fcc52d" : "#4facfe";

        // স্ক্রিনশট ম্যাচিং বল আপডেট
        ballRow.innerHTML = '';
        for(let i=0; i<3; i++) {
            let num = Math.floor(Math.random() * 10);
            ballRow.innerHTML += `<div class="p-ball">${num}</div>`;
        }
        
        confetti({ particleCount: 30, spread: 60, origin: { y: 0.2 } });
    }

    function updateClock() {
        const seconds = new Date().getSeconds();
        document.getElementById("timerText").innerText = (60 - seconds).toString().padStart(2, '0');
    }

    // প্যানেল ড্র্যাগিং ফাংশন
    const panel = document.getElementById("signalPanel");
    let drag = false, ox, oy;
    panel.addEventListener('touchstart', (e) => {
        drag = true;
        ox = e.touches[0].clientX - panel.offsetLeft;
        oy = e.touches[0].clientY - panel.offsetTop;
    });
    document.addEventListener('touchmove', (e) => {
        if (!drag) return;
        panel.style.left = (e.touches[0].clientX - ox) + "px";
        panel.style.top = (e.touches[0].clientY - oy) + "px";
        panel.style.transform = "none";
    });
    document.addEventListener('touchend', () => drag = false);
</script>
</body>
</html>

